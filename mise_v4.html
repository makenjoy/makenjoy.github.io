<!DOCTYPE html>
<!--
M   M         k                      JJJ                                   t
M M M   aa    k   k   eee    nnn       J   ooo   y   y      nnn    eee   ttttt
M   M  a  a   k k    eeeee  n   n  J   J  o   o   y y      n   n  eeeee    t
M   M   aa a  k   k   eee   n   n   JJJ    ooo     y    O  n   n   eee      tt
                                                  y
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>CITY_AIR</title>

</head>

<body>

<table>

    <tr align="right">
        <th>측정일시</th>
        <td align="left" id="gn_measuredate"></td>
    </tr>
    <!--
    <tr align="right">
        <th>권역명</th>
        <td align="left" id="gn_divisionarea"></td>
    </tr>
    -->
    <tr align="right">
        <th>측정소명</th>
        <td align="left" id="gn"></td>

    </tr>
    <tr align="right">
        <th>미세먼지 기준: 50(㎍/㎥)</th>
        <td align="left" id="gn_finedust"></td>
    </tr>
    <tr align="right">
        <th>초미세먼지 기준: 35(㎍/㎥)</th>
        <td align="left" id="gn_ultrafinedust"></td>
    </tr>
    <!--
    <tr align="right">
        <th><br/></th>
        <td align="left" id=""></td>
    </tr>
    -->
    <tr align="right">
        <th>오존 기준: 0.06(ppm)</th>
        <td align="left" id="gn_ozone"></td>
    </tr>
    <tr align="right">
        <th>통합대기환경등급</th>
        <td align="left" id="gn_idex"></td>
    </tr>

</table>

<br/>
<hr/>
<br/>

<table>
    <!--
    <tr align="right">
        <th align="right">총 데이터 건수</th>
        <td align="left" id="my1"></td>
    </tr>
    <tr align="right">
        <th>요청결과 코드</th>
        <td align="left" id="my2"></td>
    </tr>
    <tr align="right">
        <th>요청결과 메시지</th>
        <td align="left" id="my3"></td>
    </tr>
    <tr align="right">
        <th><br/></th>
        <td align="left" id=""></td>
    </tr>
    -->
    <tr align="right">
        <th>측정일시</th>
        <td align="left" id="jn_measuredate"></td>
    </tr>
    <!--
    <tr align="right">
        <th>권역명</th>
        <td align="left" id="jn_divisionarea"></td>
    </tr>
    -->
    <tr align="right">
        <th>측정소명</th>
        <td align="left" id="jn"></td>

    </tr>
    <tr align="right">
        <th>미세먼지 기준: 50(㎍/㎥)</th>
        <td align="left" id="jn_finedust"></td>
    </tr>
    <tr align="right">
        <th>초미세먼지 기준: 35(㎍/㎥)</th>
        <td align="left" id="jn_ultrafinedust"></td>
    </tr>
    <tr align="right">
        <th>오존 기준: 0.06(ppm)</th>
        <td align="left" id="jn_ozone"></td>
    </tr>

    <!--
    <tr align="right">
        <th>이산화질소농도(ppm)</th>
        <td align="left" id="jn_nitrogendioxide"></td>
    </tr>
    <tr align="right">
        <th>일산화탄소농도(ppm)</th>
        <td align="left" id="jn_carbonmonoxide"></td>
    </tr>
    <tr align="right">
        <th>아황산가스농도(ppm)</th>
        <td align="left" id="jn_sulfurousacidgas"></td>
    </tr>
    <tr align="right">
        <th>통합대기환경등급</th>
        <td align="left" id="jn_totalat_class"></td>
    </tr>
    <tr align="right">
        <th>통합대기환경지수</th>
        <td align="left" id="jn_totalat_index"></td>
    </tr>
    <tr align="right">
        <th>지수결정물질</th>
        <td align="left" id="jn_mainarticle"></td>
    </tr>

    -->
    <tr align="right">
        <th>통합대기환경등급</th>
        <td align="left" id="jn_idex"></td>
    </tr>

</table>

<br/>
<hr/>
<br/>

<table>
    <tr align="right">
        <th>측정일시</th>
        <td align="left" id="sp_measuredate"></td>
    </tr>
    <tr align="right">
        <th>측정소명</th>
        <td align="left" id="sp"></td>

    </tr>
    <tr align="right">
        <th>미세먼지 기준: 50(㎍/㎥)</th>
        <td align="left" id="sp_finedust"></td>
    </tr>
    <tr align="right">
        <th>초미세먼지 기준: 35(㎍/㎥)</th>
        <td align="left" id="sp_ultrafinedust"></td>
    </tr>
    <tr align="right">
        <th>오존 기준: 0.06(ppm)</th>
        <td align="left" id="sp_ozone"></td>
    </tr>

    <tr align="right">
        <th>통합대기환경등급</th>
        <td align="left" id="sp_idex"></td>
    </tr>

</table>

<script>

    loadXMLDoc(
        'sp',
        'http://openapi.seoul.go.kr:8088/7755574b766d6a633433786e664f42/xml/RealtimeCityAir/1/5/%EB%8F%99%EB%82%A8%EA%B6%8C/%EC%86%A1%ED%8C%8C%EA%B5%AC'
    );
    loadXMLDoc(
        'gn',
        'http://openapi.seoul.go.kr:8088/7755574b766d6a633433786e664f42/xml/RealtimeCityAir/1/5/%EB%8F%99%EB%82%A8%EA%B6%8C/%EA%B0%95%EB%82%A8%EA%B5%AC'
    );
    loadXMLDoc(
        'jn',
        'http://openapi.seoul.go.kr:8088/7755574b766d6a633433786e664f42/xml/RealtimeCityAir/1/5/%EB%8F%99%EB%B6%81%EA%B6%8C/%EC%A4%91%EB%9E%91%EA%B5%AC'
    );


    function loadXMLDoc(section, url) {
        // function loadXMLDoc(url) {
        var xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
                if (xmlhttp.status == 200) {
                    // document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
                    // alert(xmlhttp.responseText);
                    var xmlDoc = xmlhttp.responseXML;
                    var value = xmlDoc.getElementsByTagName("row")[0];

                    if (section === "gn") {
                        document.getElementById("gn_measuredate").innerHTML =
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(0, 4) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(4, 8) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(8, 10) +
                            ' <b><sub>시</sub></b>';
                        // document.getElementById("jn_divisionarea").innerHTML =
                        //     value.getElementsByTagName("MSRRGN_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("gn").innerHTML =
                            value.getElementsByTagName("MSRSTE_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("gn_finedust").innerHTML =
                            value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue;
                        document.getElementById("gn_ultrafinedust").innerHTML =
                            value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue;
                        document.getElementById("gn_ozone").innerHTML =
                            value.getElementsByTagName("O3")[0].childNodes[0].nodeValue;
                        document.getElementById("gn_idex").innerHTML =
                            value.getElementsByTagName("IDEX_NM")[0].childNodes[0].nodeValue;

                        if (parseInt(value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue) > 50)
                            document.getElementById("gn_finedust").style.backgroundColor = "red";
                        else
                            document.getElementById("gn_finedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue) > 35)
                            document.getElementById("gn_ultrafinedust").style.backgroundColor = "red";
                        else
                            document.getElementById("gn_ultrafinedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("O3")[0].childNodes[0].nodeValue) > 0.06)
                            document.getElementById("gn_ozone").style.backgroundColor = "red";
                        else
                            document.getElementById("gn_ozone").style.backgroundColor = "skyblue";

                    }
                    if (section === "jn") {
                        document.getElementById("jn_measuredate").innerHTML =
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(0, 4) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(4, 8) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(8, 10) +
                            ' <b><sub>시</sub></b>';
                        // document.getElementById("jn_divisionarea").innerHTML =
                        //     value.getElementsByTagName("MSRRGN_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("jn").innerHTML =
                            value.getElementsByTagName("MSRSTE_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("jn_finedust").innerHTML =
                            value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue;
                        document.getElementById("jn_ultrafinedust").innerHTML =
                            value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue;
                        document.getElementById("jn_ozone").innerHTML =
                            value.getElementsByTagName("O3")[0].childNodes[0].nodeValue;
                        document.getElementById("jn_idex").innerHTML =
                            value.getElementsByTagName("IDEX_NM")[0].childNodes[0].nodeValue;

                        if (parseInt(value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue) > 50)
                            document.getElementById("jn_finedust").style.backgroundColor = "red";
                        else
                            document.getElementById("jn_finedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue) > 35)
                            document.getElementById("jn_ultrafinedust").style.backgroundColor = "red";
                        else
                            document.getElementById("jn_ultrafinedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("O3")[0].childNodes[0].nodeValue) > 0.06)
                            document.getElementById("jn_ozone").style.backgroundColor = "red";
                        else
                            document.getElementById("jn_ozone").style.backgroundColor = "skyblue";

                    }
                    if (section === "sp") {
                        document.getElementById("sp_measuredate").innerHTML =
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(0, 4) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(4, 8) +
                            ' / ' +
                            value.getElementsByTagName("MSRDT")[0].childNodes[0].nodeValue.slice(8, 10) +
                            ' <b><sub>시</sub></b>';
                        // document.getElementById("jn_divisionarea").innerHTML =
                        //     value.getElementsByTagName("MSRRGN_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("sp").innerHTML =
                            value.getElementsByTagName("MSRSTE_NM")[0].childNodes[0].nodeValue;
                        document.getElementById("sp_finedust").innerHTML =
                            value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue;
                        document.getElementById("sp_ultrafinedust").innerHTML =
                            value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue;
                        document.getElementById("sp_ozone").innerHTML =
                            value.getElementsByTagName("O3")[0].childNodes[0].nodeValue;
                        document.getElementById("sp_idex").innerHTML =
                            value.getElementsByTagName("IDEX_NM")[0].childNodes[0].nodeValue;

                        if (parseInt(value.getElementsByTagName("PM10")[0].childNodes[0].nodeValue) > 50)
                            document.getElementById("sp_finedust").style.backgroundColor = "red";
                        else
                            document.getElementById("sp_finedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("PM25")[0].childNodes[0].nodeValue) > 35)
                            document.getElementById("sp_ultrafinedust").style.backgroundColor = "red";
                        else
                            document.getElementById("sp_ultrafinedust").style.backgroundColor = "skyblue";

                        if (parseInt(value.getElementsByTagName("O3")[0].childNodes[0].nodeValue) > 0.06)
                            document.getElementById("sp_ozone").style.backgroundColor = "red";
                        else
                            document.getElementById("sp_ozone").style.backgroundColor = "skyblue";

                    }
                }
                else if (xmlhttp.status == 400) {
                    alert('There was an error 400');
                }
                else {
                    alert('something else other than 200 was returned');
                    // alert('Request failed: ' + xmlhttp.status);

                }
            }
        };

        xmlhttp.open("GET", url, true);
        xmlhttp.send();
    }

</script>


</body>
</html>
